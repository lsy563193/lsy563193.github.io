<!DOCTYPE html>




<html class="theme-next pisces" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/lin-oracle.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/lin-oracle.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/lin-oracle.png?v=5.1.4">


  <link rel="mask-icon" href="/images/lin-oracle.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="cartographer," />





  <link rel="alternate" href="/atom.xml" title="林少岳的博客" type="application/atom+xml" />






<meta name="description" content="摘要位姿图已成为解决同时定位和构图（SLAM）问题的流行表示。位姿图是一组机器人位姿，通过观察附近位姿共有的特征获得的非线性约束连接。优化大型位姿图一直是移动机器人的瓶颈，因为直接非线性优化的计算时间可以随着图的大小而指数增长。在本文中，我们提出了一种构造和求解线性子问题的有效方法，这是这些直接方法的瓶颈。我们将我们称为稀疏位姿调整（SPA）的方法与竞争间接方法进行比较，并表明它在收敛速度和准确性">
<meta name="keywords" content="cartographer">
<meta property="og:type" content="article">
<meta property="og:title" content="cartographer论文翻译 二维构图的高效稀疏位姿调整">
<meta property="og:url" content="http://lsy563193.github.io/slam-EfficientSPAFor2DMapping/index.html">
<meta property="og:site_name" content="林少岳的博客">
<meta property="og:description" content="摘要位姿图已成为解决同时定位和构图（SLAM）问题的流行表示。位姿图是一组机器人位姿，通过观察附近位姿共有的特征获得的非线性约束连接。优化大型位姿图一直是移动机器人的瓶颈，因为直接非线性优化的计算时间可以随着图的大小而指数增长。在本文中，我们提出了一种构造和求解线性子问题的有效方法，这是这些直接方法的瓶颈。我们将我们称为稀疏位姿调整（SPA）的方法与竞争间接方法进行比较，并表明它在收敛速度和准确性">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/f1.png">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/f2.png">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l1.png">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l2.png">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l3.png">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l4.png">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l5.png">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l6.png">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l7.png">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l8.png">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/t1.png">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/t2.png">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/f3.png">
<meta property="og:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/f4.png">
<meta property="og:updated_time" content="2018-12-13T11:04:14.510Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="cartographer论文翻译 二维构图的高效稀疏位姿调整">
<meta name="twitter:description" content="摘要位姿图已成为解决同时定位和构图（SLAM）问题的流行表示。位姿图是一组机器人位姿，通过观察附近位姿共有的特征获得的非线性约束连接。优化大型位姿图一直是移动机器人的瓶颈，因为直接非线性优化的计算时间可以随着图的大小而指数增长。在本文中，我们提出了一种构造和求解线性子问题的有效方法，这是这些直接方法的瓶颈。我们将我们称为稀疏位姿调整（SPA）的方法与竞争间接方法进行比较，并表明它在收敛速度和准确性">
<meta name="twitter:image" content="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/f1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":6,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://lsy563193.github.io/slam-EfficientSPAFor2DMapping/"/>





  <title>cartographer论文翻译 二维构图的高效稀疏位姿调整 | 林少岳的博客</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?41fc030db57d5570dd22f78997dc4a7e";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">林少岳的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学而不思则罔 思而不学则殆</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lsy563193.github.io/slam-EfficientSPAFor2DMapping/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ShaoYue Lin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/4884007?s=400&u=af3c3a113957bd20c7f2b0102773570000f7b48a&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="林少岳的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">cartographer论文翻译 二维构图的高效稀疏位姿调整</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-27T11:03:04+08:00">
                2018-11-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/slam技术/" itemprop="url" rel="index">
                    <span itemprop="name">slam技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  9,186
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>位姿图已成为解决同时定位和构图（SLAM）问题的流行表示。<br>位姿图是一组机器人位姿，通过观察附近位姿共有的特征获得的非线性约束连接。<br>优化大型位姿图一直是移动机器人的瓶颈，因为直接非线性优化的计算时间可以随着图的大小而指数增长。<br>在本文中，我们提出了一种构造和求解线性子问题的有效方法，这是这些直接方法的瓶颈。<br>我们将我们称为稀疏位姿调整（SPA）的方法与竞争间接方法进行比较，并表明它在收敛速度和准确性方面优于它们。<br>我们在大量室内真实世界地图和非常大的模拟数据集上展示了它的有效性。<br>C++中的开源实现和数据集是公开可用的。<br><a id="more"></a></p>
<h2 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1. 介绍"></a>1. 介绍</h2><p>机器人构图的最新文献显示出对基于图的SLAM方法的兴趣日益增加。<br>在最一般的形式中，图形具有表示机器人位姿和世界特征的节点，测量将它们连接为约束。<br>所有方法的目标是共同优化节点的位姿，以便最小化约束引入的误差。<br>该问题的一个经典变体来自计算机视觉，并表示为束调整[25]，其通常用Levenberg-Marquardt（LM）非线性优化器的专用变体解决。<br>在SLAM文献中，Lu-Milios [18]，GraphSLAM [24]和√SAM[4]都是这种技术的变种。 </p>
<p>由于特征往往超过机器人位姿，<br>通过将特征观察转换为机器人位姿之间的直接约束，可以创建更紧凑的系统，<br>要么通过边缘化[1,24,4]，要么通过直接匹配 - 例如，<br>在两个机器人位姿之间匹配激光扫描产生两者的相对位姿估计。<br>在典型的机器人地图应用中，位姿约束系统表现出稀疏的连接结构， (所以SPA是通过位姿构造)<br>因为传感器的范围通常限于机器人的附近。</p>
<p>有效地解决位姿图（即，找到节点的最佳位置）是这些方法的关键问题，尤其是在在线构图问题的背景下。<br>100m x 100m 办公空间的典型2D激光地图可能有数千个节点和更多约束（见图1）。<br>此外，向此构图添加循环闭包约束可能会影响系统中的几乎所有位姿。<br>o<br><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/f1.png" alt="image"></p>
<p>LM方法的核心在于解决大的稀疏线性问题。</p>
<p>在本文中，我们开发了一种从约束图有效地计算稀疏矩阵的方法，并使用直接稀疏线性方法来解决它。<br>与视觉文献中的稀疏束调整类似，我们将此方法称为稀疏位姿调整（SPA），因为它处理位姿-位姿约束的受限情况。<br>SBA/GraphSLAM优化器与解决线性子问题的有效方法的组合具有以下优点。</p>
<ul>
<li><p>它考虑约束中的协方差信息，从而得到更精确的解。</p>
</li>
<li><p>SPA是健壮的并且容忍初始化，对于增量处理和批处理来说，具有非常低的故障率（陷入局部最小值）。</p>
</li>
<li><p>收敛非常快，因为它只需要LM方法的几次迭代。</p>
</li>
<li><p>与EKF和信息滤波器不同，SPA是完全非线性的：在每次迭代中，它线性化当前位姿周围的所有约束。</p>
</li>
<li><p>SPA在批处理和增量模式下都是有效的</p>
</li>
</ul>
<p>我们在实验结果部分记录了该方法的这些和其他特征，其中我们还将此方法与其他LM和非LM的最新优化器进行比较。</p>
<p>SPA效率的好处之一是，构图系统可以连续优化其图，提供所有节点的最佳全局估计，而计算开销非常小。<br>解决图1所示的大型地图的优化问题只需要距离里程计提供的初始配置150ms。</p>
<p>在增量模式下，在添加每个节点之后优化图，对于任何节点添加，它需要小于15ms。</p>
<p>尽管SPA可以用3D位姿参数化，但是本文将其局限于二维构图，这是一个具有多种竞争优化技术的成熟领域。<br>我们的意图是表明一个基于二维位姿的构图系统可以在线使用SPA作为其优化引擎，甚至在大规模环境和具有大环路闭合，而不诉诸子构图或复杂的划分方案。</p>
<h2 id="II-相关工作"><a href="#II-相关工作" class="headerlink" title="II. 相关工作"></a>II. 相关工作</h2><p>18 1997 — 提出graph slam,无优化，慢</p>
<p>13 2001 — 松弛法定位机器人<br>06 2002 — 高斯-塞德尔松弛法最小化约束网络中的误差。<br>09 2005 — 多层松弛法</p>
<p>21 2006 — 优化位姿图 提出随机梯度下降法<br>10 2009 — 基于树的参数化 提高梯度下降法收敛速度</p>
<p>02 1995 — 最直观的方法:非线性最小二乘优化(ML pass) 一种有前途的技术是预条件共轭梯度PCG<br>15 2004 — 大规模制图 使用了PCG作为解析器<br>20 2004 — 大规模3d制图 使用了PCG作为解析器<br>05 1994 — 稀疏矩阵库<br>03 2006 — 直接线性求解器<br>04 2005 — 使用稀疏的直接线性求解器[3]实现束调整<br>14 2007 — $\sqrt{SAM}$的变体，称为iSAM</p>
<p>07 2006 — 用信息矩阵形式递增地求解图的滤波技术:延迟稀疏信息滤波器（DSIF）<br>08 2006 — 通过树表示来捕获系统的稀疏结构</p>
<p>00 2010 — 直接稀疏Cholesky分解求解线性系统的二维位姿图优化方法</p>
<p>Lu和Milios[18]提出了基于图的SLAM的具有开创性的工作，其中他们通过ICP扫描匹配来确定扫描之间的成对测量，然后通过迭代线性化来优化该图。<br>那时，SLAM社区还没有有效的优化算法，基于图的方法被认为太耗时。<br>尽管如此，基于图的SLAM的直观公式吸引了许多研究者，并做出了有价值的贡献。</p>
<p>自从Lu和Milios论文发表以来，人们提出了许多图优化的方法。<br>霍华德等人[13]应用松弛法定位机器人并建立地图。<br>杜克特等人[6]提出了利用高斯-塞德尔松弛来最小化约束网络中的误差。<br>为了克服松弛法固有的收敛速度慢，Frase等人[9]提出了Gauss-Seidel松弛的一种变型，称为多层松弛法(MLR)。<br>它适用于不同分辨率的松弛。<br>据报道，MLR在2D环境中提供非常好的结果，尤其是在初始猜测的误差有限的情况下。</p>
<p>奥尔森[21]等人提出了随机梯度下降法来优化位姿图。<br>这种方法的优点是易于实现，并且对错误的初始猜测异常健壮。<br>后来，格里塞蒂等[10]通过应用显著提高收敛速度的基于树的参数化来扩展这种方法。<br>这些方法的主要问题是，它们假设图中的误差或多或少是均匀的，因此它们很难应用于某些约束未被指定的图。</p>
<p>优化图的最直观的方法可能是通过非线性最小二乘优化，如LM。<br>最小二乘法需要重复求解通过线性化图的原始似然函数而获得的大型线性系统。<br>这种线性系统通常非常大；因此，第一种基于图的方法是耗时的，因为它们没有利用其自然的稀疏性。<br>一种有前途的技术是预条件共轭梯度（PCG）[2]，后来被Konolige[15]和Montemerlo和Srun[20]用作大型稀疏位姿约束系统的有效求解器； 预条件通常是不完全Cholesky分解。<br>PCG是一种迭代方法，一般需要n次迭代才能收敛，其中n是图中变量的数目。<br>我们从Sparselib++和IML++[5]中实现了PCG的稀疏矩阵版本，并将该实现用于比较实验。</p>
<p>最近，Dellaert和他的同事使用束调整，他们使用稀疏的直接线性求解器[3]实现束调整；他们称他们的系统$\sqrt{SAM}$[4]。<br>我们的方法与SAM类似；主要在工程上不同，我们是通过使用有序数据结构高效地构造线性子问题。<br>我们还使用LM代替标准的非线性最小二乘法，从而提高了鲁棒性。<br>最后，我们介绍了增量情况下的一种“连续LM”方法，以及一种更稳健的批处理问题的初始化方法。</p>
<p>凯斯等人。[14]引入了$\sqrt{SAM}$的变体，称为iSAM，其执行与非线性最小二乘问题相关联的线性矩阵的增量更新。<br>只偶尔执行重线性化和变量排序，从而提高计算效率。<br>在我们的方法中，重新线性化和矩阵构造是非常有效的，因此这些方法变得不太必要。<br>目前，我们没有iSAM或_SAM的实现，无法针对性能进行测试。</p>
<p>松弛法或最小二乘法通过迭代地细化初始猜测来进行。<br>相反，基于随机梯度下降的方法对初始猜测更稳健。<br>在SLAM文献中，这种初始猜测的重要性经常被低估。<br>初始猜测越好，算法找到正确解决方案的可能性就越大。<br>在本文中，我们讨论了这一点，并评估了三种不同的策略来计算初始猜测。</p>
<p>与全非线性优化相比，一些研究人员探索了使用信息矩阵形式递增地求解图的滤波技术。<br>第一种这样的方法是由EuStruts等人提出的。<br>并称之为延迟稀疏信息滤波器（DSIF）〔7〕。<br>这种技术可能是非常有效的，因为它仅向系统信息矩阵添加少量的常数元素，甚至对于循环闭合也是如此。<br>然而，恢复所有节点的全局位姿需要求解一个大型的稀疏线性系统；有更快的方法来获得近似的最近位姿。</p>
<p>Frese提出了TreeMap [8]算法，该算法通过树表示来捕获系统的稀疏结构。<br>树中的每个叶子都是一个局部地图，估计的一致性是通过树发送更新到局部地图来实现的。<br>在理想条件下，此方法可以在O（n log n）时间内更新整个地图，其中n是地图中元素的数量。<br>但是，如果地图具有许多局部连接，则局部地图的大小可能非常大，并且它们的更新（被视为基本操作）变得计算成本昂贵，如本文其余部分所示。</p>
<p>综上所述，本文提出了一种利用直接稀疏Cholesky分解求解线性系统的二维位姿图优化方法。<br>线性系统的计算采用内存高效的方式，使缓存遗漏最小化，从而显著提高了性能。<br>我们将我们的方法在精度和速度上与可用的现有LM和非LM方法进行比较，并且表明SPA优于它们。<br>开源实现在C++和Matlab/OcthVE中都是可用的。<br>用于求解稀疏系统的有效直接（非迭代）算法已经变得可用[3]，从而恢复了一系列用于优化过去被丢弃的图的方法。</p>
<p>在本文中，</p>
<h2 id="III-SYSTEM-FORMULATION"><a href="#III-SYSTEM-FORMULATION" class="headerlink" title="III. SYSTEM FORMULATION"></a>III. SYSTEM FORMULATION</h2><p>解决SLAM问题的流行方法是所谓的“基于图”或“基于网络”方法。<br>这个想法是通过图来表示机器人测量的历史。<br>图中的每个节点表示传感器测量或局部地图，并且用测量所处的位置对其进行标记。<br>两个节点之间的边缘编码由于连接测量的对齐而产生的空间信息，并且可以被视为两个节点之间的空间约束。</p>
<p>在基于图的SLAM环境中，通常考虑两个不同的问题。<br>第一种是基于传感器数据识别约束。<br>由于环境中的潜在模糊或对称性，这种所谓的数据关联问题通常很难解决。<br>这个问题的解决方案通常被称为SLAM前端，它直接处理传感器数据。<br>第二个问题是修正机器人的位姿，以获得给定约束环境的一致构图。<br>这种方法的这一部分通常被称为优化器或SLAM后端。<br>它的任务是寻找使约束中编码的测量的可能性最大化的节点的配置。<br>对这个问题的另一种观点是由物理学中的弹性模型给出的。<br>在这种观点中，节点被视为质量，而约束则被视为与质量相连的弹簧。<br>弹簧和质量的最小能量配置描述了构图问题的解决方案。</p>
<p>在其操作期间，基于图的SLAM系统交错前端和后端的执行，如图2所示。</p>
<p><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/f2.png" alt="image"></p>
<p>这是必需的，因为前端需要对部分优化的构图进行操作，以限制对潜在约束的搜索。<br>当前估计越精确，由前端生成的约束将越健壮，并且其操作也越快。<br>因此，从估计精度和执行时间方面衡量的优化算法的性能对整个构图系统有重要影响。</p>
<p>本文详细描述了一种高效紧凑的二维图优化方法。<br>我们的算法可以与处理不同类型传感器的任意前端耦合。<br>为了简洁的介绍，我们简短地描述了激光数据的前端。<br>然而，一般概念可以直接应用于不同的传感器。</p>
<h2 id="IV-SPARSE-POSE-ADJUSTMENT"><a href="#IV-SPARSE-POSE-ADJUSTMENT" class="headerlink" title="IV. SPARSE POSE ADJUSTMENT"></a>IV. SPARSE POSE ADJUSTMENT</h2><p>为了优化一组位姿和约束，我们使用众所周知的Levenberg-Marquardt(LM)方法作为框架，并且使用特定的实现使其对于二维地图构建中遇到的稀疏系统有效。<br>类似于计算机视觉的稀疏束调整（SPA），它是用于相机和特征的LM的类似高效实现，我们称之为稀疏位姿调整（SPA）。</p>
<h3 id="A-Error-Formulation"><a href="#A-Error-Formulation" class="headerlink" title="A. Error Formulation"></a>A. Error Formulation</h3><p>系统的变量是机器人的全局位姿集，通过平移和角度参数化:$c_i=[t_i , θ_i ] = [x_i , y_i , θ_i]^⊤$<br>约束是来自另一个（$c_i$）位置的一个节点$c_j$的测量。在$c_i$的帧中，$c_i$和$c_j$之间的测量偏移是$\overline{z}_{ij}$，具有精度矩阵Λij（协方差的倒数）。<br>对于$c_i$和$c_j$的任何实际位姿，它们的偏移可以计算为</p>
<p><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l1.png" alt="image"></p>
<p>这里$R_i$是$θ_i$的2x2旋转矩阵。 $h(c_i , c_j )$称为测量方程。与约束相关的误差函数和总误差是</p>
<p><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l2.png" alt="image"></p>
<p>注意，$h(c_i，c_j)$中的角度参数不是唯一的，因为加上或减去2π会产生相同的结果。当角度差发生时，它们总是标准化为间隔（-π，π）。</p>
<h3 id="B-Linear-System"><a href="#B-Linear-System" class="headerlink" title="B. Linear System"></a>B. Linear System</h3><p>通过最小化等式2中的总误差来找到$c$的最佳位置。解决该问题的标准方法是Levenberg-Marquardt（LM），围绕c的当前值迭代线性化解。通过将变量c堆叠到向量x中来形成线性系统，并且误差函数被形成为向量e。然后我们定义：</p>
<p><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l3.png" alt="image"></p>
<p>LM系统是:</p>
<p><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l4.png" alt="image"></p>
<p>这里λ是一个小的正乘数，它在梯度下降和牛顿-欧拉方法之间转换。梯度下降更稳健，不太可能陷入局部最小值，但收敛缓慢;牛顿-欧拉的行为相反。通过为每个测量$h（c_i，c_j）$添加四个分量来形成矩阵H.</p>
<p><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l5.png" alt="image"></p>
<p>这里我们略微滥用了J的符号，其中$J_i$是关于变量$c_i$的$e_{ij}$的雅可比行列式。这些组件都是3x3块。通过为每个约束添加3x1块$J_{c_i}Λ_{ij}e_{ij}$和$J_{c_j}Λ_{ij}e_{ij}$形成右侧。求解线性方程得到增量Δx即可被添加回x的当前值，如下所示：</p>
<p><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l6.png" alt="image"></p>
<h3 id="C-Error-Jacobians"><a href="#C-Error-Jacobians" class="headerlink" title="C. Error Jacobians"></a>C. Error Jacobians</h3><p>测量函数的雅可比行列式在正则方程式（4）中出现，我们在这里列出它们。</p>
<p><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l7.png" alt="image"></p>
<h3 id="D-Sparsity-稀疏性"><a href="#D-Sparsity-稀疏性" class="headerlink" title="D.  Sparsity 稀疏性"></a>D.  Sparsity 稀疏性</h3><p>我们感兴趣的是大型系统，其中||c||的数量可以是10k或更多（我们能够找到的最大真实世界室内数据集是大约3k位姿，但我们可以生成任何顺序的合成数据集）。系统变量的数量是3||c||，而H矩阵是||c ||^2，或者超过$10^8$个元素。。操纵这样大的矩阵是昂贵的。幸运的是，对于典型的场景，约束的数量仅与位姿的数量成线性关系，因此它非常稀疏。我们可以利用稀疏性来更有效地解决线性问题。</p>
<p>为了以稀疏格式求解（4），我们使用CSparsepackage [3]。该软件包具有针对稀疏线性系统的高度优化的Choleskydecomposition求解器。它采用了几种高效分解策略，包括逻辑排序和近似最小度（AMD）算法，以便在变量很大时对变量进行重新排序。</p>
<p>通常，分解的复杂性将是变量数量的O（n3）。对于稀疏矩阵，复杂性将取决于Cholesky因子的密度，而Cholesky因子的密度又取决于H的结构及其变量的顺序。Mahon等[19]分析了Clesles分解的行为作为SLAM系统中闭环的函数。如果循环闭合的数量是恒定的，那么Cholesky因子密度是O（n），并且分解是O（n）。如果循环闭包的数量随着变量的数量线性增长，则Cholesky因子密度增长为O（n2），分解为O（n3）。</p>
<h3 id="E-Compressed-Column-Storage-压缩列存储"><a href="#E-Compressed-Column-Storage-压缩列存储" class="headerlink" title="E.  Compressed Column Storage 压缩列存储"></a>E.  Compressed Column Storage 压缩列存储</h3><p>LM算法的每次迭代都有三个步骤：建立线性系统、分解H和通过回代寻找$\Delta x$。建立系统的约束数量是线性的（因此基于多数图的SLAM系统的变量数量也是线性的）。在许多情况下，它可能成为线性求解器中成本较高的部分。这里我们概括了根据方程（5）产生的约束条件建立H的稀疏矩阵形式的一种有效方法。下图显示了基本思想。</p>
<p>CSparse使用压缩列存储（CCS）格式的forsparse矩阵。下图显示了基本概念。</p>
<p><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/l8.png" alt="image"></p>
<p>数组中的每个非零条目都放在val向量中。条目首先按列排序，然后按行排序。col_ptr每列有一个条目，加上最后一个条目，即非零总数（nnz）。列的col_ptr条目指向row_ind和val变量中列的开头。最后，row_ind给出了列中每个条目的行索引。</p>
<p>CCS格式具有存储效率，但难以逐步创建，因为对列的每个新的非零添加都会导致所有后续条目的移位。最有效的方法是按列顺序创建稀疏矩阵，这需要循环通过约束|| c ||次。相反，我们只修改一次约束，并将每个3x3块$J_i^TΛ_{ij}J_{i}$存储在一个与CCS格式平行的特殊的面向块的数据结构中。该算法在表I中给出。在该算法中，我们通过约束来将3×3块矩阵存储到C ++ std :: mapdata结构中，每列一个。构图在基于其键（行索引）的有序插入时是有效的。一旦创建了这个数据结构（步骤（2）），我们使用构图的有序特性来创建Hby的稀疏CCS格式，按照其键的顺序循环遍历每个构图，首先创建列和行索引，以及然后放入值。将列/行创建与值插入分开的原因是因为对于LM的任何迭代集合，前者只需要执行一次。</p>
<p>注意，只存储H的上三角形元素，因为CSparse中的Cholesky解算器仅查看该部分，并假设矩阵是对称的。</p>
<p><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/t1.png" alt="image"></p>
<p>F.可持续的LM系统</p>
<p>LM系统算法详见表II。对于具有相关测量的一组节点c，它在LM算法中执行一步。运行单次迭代允许LM的增量操作，以便在迭代之间可以添加更多节点。该算法是可持续的，因为λ在迭代之间被保存，因此连续迭代可以基于它们的结果改变λ。这个想法是添加一些节点和测量不会对系统产生太大的影响，因此λ的值具有关于梯度下降状态与欧拉 - 牛顿方法的信息。当发生循环闭合时，系统可能无法找到一个好的最小值，并且λ将在接下来的几次迭代中上升以使系统沿着良好的路径前进。</p>
<p>有许多不同的调整λ的方法;我们选择一个简单的方法。系统以一个小的lambda开始， $10^4$ 。如果更新的系统具有比原始系统更低的误差，则λ减半。如果误差相同或更大，则λ加倍。这在增量优化的情况下非常有效。只要在添加节点时误差减小，λ就会减小，系统会停留在Newton-Euler区域。当添加链接导致无法校正的大失真时，λ可以上升并且系统返回到更稳健的梯度下降。</p>
<h2 id="V-SCAN-MATCHING-扫描匹配"><a href="#V-SCAN-MATCHING-扫描匹配" class="headerlink" title="V.  SCAN MATCHING 扫描匹配"></a>V.  SCAN MATCHING 扫描匹配</h2><p>SPA需要通过激光扫描（或其他传感器）的匹配进行精确（逆协方差）估计。有几种扫描匹配算法可以提供这种算法，例如，Gutmannet等[11]使用点匹配参考扫描中提取的线，并返回高斯误差估计。最近，由Olson [22]扩展的Konolige和Chou [17]的相关方法提供了一种在给定范围内找到全局最佳匹配的有效方法，同时返回准确的协方差。该方法允许单个扫描或一组对齐扫描与另一个单个扫描或一组对齐扫描匹配。此方法在SRI的构图系统$Karto^1$中用于顺序扫描的局部匹配，以及[12]中的扫描集的循环闭包匹配。为了生成实验的真实数据集，我们在63个不同大小的存储机器人日志上运行Karto，使用其扫描匹配和优化器来构建构图并生成约束，包括循环闭包。保存图表并将其用作实验中所有方法的输入。</p>
<p><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/t2.png" alt="image"></p>
<h2 id="VI-EXPERIMENT-实验"><a href="#VI-EXPERIMENT-实验" class="headerlink" title="VI.  EXPERIMENT 实验"></a>VI.  EXPERIMENT 实验</h2><p>在本节中，我们将展示实验，其中我们将SPA与63个真实世界数据集和大型模拟数据集上的最新方法进行比较。我们考虑了各种各样的方法，包括最先进的技术。</p>
<ul>
<li>信息过滤器：DSIF[7] </li>
<li>随机梯度下降：环面[ 10 ]</li>
<li>分解非线性系统：Treemap[8]</li>
<li>稀疏姿态调整：SPA，带有(a)稀疏直接Cholesky求解器和(b)迭代PCG[15]</li>
</ul>
<p>我们更新了PCG实现，以使用与SPA相同的“连续LM”方法；惟一的区别在于底层的线性求解器。先决条件是不完全Cholesky方法，共轭梯度以稀疏矩阵形式实现。我们还评估了一个稠密的Cholesky求解器，但是计算和内存需求都比其他方法大几个数量级。例如，对于具有1600个约束和800个节点的数据集，使用密集Cholesky求解器进行迭代需要2.1秒，而其他方法平均需要几毫秒。所有实验都在2.67Ghz运行的Intel Core i7-920上进行。</p>
<p><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/f3.png" alt="image"></p>
<p>在下文中，我们报告了在不同操作条件下方法的行为的累积分析；所有数据集的结果可在线查阅www.ros.org/./2010/spa。我们在批处理和在线两种模式下测试了各种方法。在批处理模式下，我们为算法提供全图，而在线模式下，每当向图中添加一个新节点时，我们都进行一定数量的迭代。在本节的其余部分中，我们首先讨论离线实验，然后介绍在线实验。通过对大规模仿真数据集上各种方法的分析，得出结论。</p>
<h3 id="A-精度测量"><a href="#A-精度测量" class="headerlink" title="A.精度测量"></a>A.精度测量</h3><p>对于这些室内数据集，没有基本事实。相反，姿态约束系统的优良性度量是约束的协方差加权平方误差，或称^2误差。如果扫描匹配器是准确的，那么较低的^2表示扫描对齐得更好。图3显示了在真实世界数据集上的这种效果。</p>
<h3 id="B-真实世界实验：离线优化。"><a href="#B-真实世界实验：离线优化。" class="headerlink" title="B.真实世界实验：离线优化。"></a>B.真实世界实验：离线优化。</h3><p>为了离线优化数据集，我们为每个优化器提供问题的完整描述。我们在比较DSIF和TreeMap时省略了它们，因为它们只增量地操作（DSIF相当于批处理模式下SPA的一次迭代）。由于离线优化的成功很大程度上取决于初始猜测，因此我们还研究了两种初始化策略，如下所述。</p>
<ul>
<li>里程计: 图中的节点用增量约束进行初始化。这是几乎所有的图优化算法所采用的标准方法。</li>
<li>生成树: 使用广度优先访问在图上构造生成树。树的根是图的第一个节点。节点的位置根据生成树的深度优先访问进行初始化。将子节点的位置设置为根据连接约束转换后的父节点的位置。在我们的实验中，这种方法给出了最好的结果。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/lsy563193/image/master/cartographer_notes/2d-spa/f4.png" alt="image"></p>
<p>对于每个数据集和每个优化器，我们计算上面描述的初始猜测。每个优化器都运行最少的迭代次数，或者直到满足终止条件为止。我们测量了收敛所需的时间和每种方法的2误差。图4总结了Odo.和Spanning-Tree初始化的结果。对于这些数据集，这两种类型的初始化在性能上没有实质性差异。</p>
<p>在误差图中，PCG和SPA收敛到几乎完全相同的解，因为唯一的区别是线性差异。求解器。它们都主导TORO，对于较大的图，TORO的误差是TORO的10倍以上。我们把此归因于TORO无法处理非球面协方差，以及它的非常慢的收敛特性。对于几乎所有的图，SPA所需的计算量几乎比PCG或TORO少一个数量级。</p>
<p>TORO被设计成对糟糕的初始化具有鲁棒性，并且为了测试这一点，我们还运行所有方法，所有节点都初始化为(0，0，0)。在这种情况下，SPA和PCG收敛到所有数据集的非全局最小值，而TORO能够重建正确的拓扑。</p>
<h3 id="C-真实世界实验：在线优化"><a href="#C-真实世界实验：在线优化" class="headerlink" title="C.真实世界实验：在线优化"></a>C.真实世界实验：在线优化</h3><p>对于在线比较，我们通过添加一个节点以及通过将新添加的节点连接到先前存在的图来递增地扩充图。我们在插入每个节点之后调用优化器，并且以这种方式在与SLAM前端一起执行时模拟它的行为。对于最大次数的迭代，或者直到误差不减小为止，进行优化。SPA/PCG的最大迭代次数是1；TreeMap为3；TORO为100。由于PCG迭代求解线性子问题，因此我们把其限制在50次迭代。选择这些阈值是为了在减少错误方面获得最佳性能。</p>
<p>在收敛性方面，SPA/PCG方法占主导地位。这对于DSIF的情况并不奇怪，DSIF是一种信息过滤器，因此在关闭大循环时会出现线性化误差。TORO具有与SPA最接近的性能，但每次迭代的收敛速度非常慢，这是梯度方法的特点；在收敛性方面，SPA/PCG方法占主导地位。这对于DSIF的情况并不奇怪，DSIF是一种信息过滤器，因此在关闭大循环时会出现线性化误差。TORO算法与SPA算法性能最接近，但每次迭代的收敛速度很慢，具有梯度法的特点；在收敛性方面，SPA/PCG算法是其他算法的主要特点。这对于DSIF的情况并不奇怪，DSIF是一种信息过滤器，因此在关闭大循环时会出现线性化误差。TORO具有与SPA最接近的性能，但每次迭代的收敛速度非常慢，这是梯度方法的特点；它也不处理非循环协方差，这限制了它实现最小2的能力。由于树图具有建立树结构进行优化的复杂策略，因此很难进行分析。对于这些数据集，它似乎有一个带有小叶子的大树（大型数据集循环）。通过固定线性化和删除连接，优化了树结构，使计算速度快，但收敛性差，2比SPA差近3个数量级。</p>
<p>所有的方法在约束图的大小上都是近似线性的，这意味着大循环闭包的数量增长缓慢。在所有数据集中，Treemap的性能最好，其次是SPA和DSIF。注意，SPA的行为是极其规则的：在任何数据集上与线性级数几乎没有偏差。此外，平均时间和最大时间是相同的：参见图8中的图表。最后，TORO和PCG每次迭代使用更多的时间，PCG大约是SPA的四倍。由于SPA的快速收敛性，我们只需每增加n个节点，就可以实现更低的计算量。我们强调这些图表是我们所能找到的最大的室内数据集，它们对SPA来说并不具有挑战性。</p>
<h3 id="D-合成数据集"><a href="#D-合成数据集" class="headerlink" title="D.合成数据集"></a>D.合成数据集</h3><p>为了估计算法的渐近行为，我们生成一个大的模拟数据集。机器人在网格上移动，网格的每个单元格都有5米的一边，我们每米创建一个节点。这个机器人的感知范围是1.5米。机器人的运动和测量都受到标准偏差为u=diag(0.01m,0.01m,0.5deg)的零均值高斯噪声的影响。每当机器人接近它访问过的位置时，我们就生成一个新的约束。模拟区域跨度超过500×500米，轨道总长100公里，重复观测频繁。全图如图6所示。这是一个极具挑战性的数据集，比任何真实世界的数据集都要糟糕。下面，我们报告所有我们比较的算法的批处理和在线执行的结果。</p>
<p>a)离线优化：每个批处理方法都使用前面部分描述的三个初始化来执行：里程计、生成树和零。结果如图7所示，是时间的函数。唯一能从零或里程表初始化优化图的方法是TORO；SPA/PCG在里程表或零开始时基本上不会收敛到全局最小值。SPA/PCG在生成树初始化后10秒左右全局收敛，在收敛点SPA明显更快（参见图7中的放大图）。TORO具有良好的初始收敛性，但由于梯度下降而具有长尾。</p>
<p>b)在线优化：我们增量地处理数据集，如第六-C节所述。在图8中，我们报告了每增加一个节点2误差和时间的演变。SPA和TreeMap都收敛到最小2（对于收敛图，参见图7）。然而，它们的计算行为非常不同：TreeMap每次迭代最多可以使用100秒，而SPA随着图的大小而缓慢增长。由于TreeMap在数据集中进行重访，因此树形图具有叶子非常大的小树，并且在每个叶子处执行LM优化，导致低误差和高计算量。其他方法具有与SPA等效的计算量，但不收敛。同样地，DSIF性能很差，并且不会收敛。TORO收敛，但是像往常一样难以清除小的误差。PCG的尖峰是由于它没有完全解决线性子问题，最终导致较高的整体误差。</p>
<h2 id="VII-结论"><a href="#VII-结论" class="headerlink" title="VII. 结论"></a>VII. 结论</h2><p>本文提出并实验验证了一个二维姿态图的稀疏姿态调整非线性优化系统。SPA依赖于有效的线性矩阵构造和稀疏的非迭代Cholesky分解来有效地表示和解决大型稀疏姿态图。我们所能找到的真实数据集中没有一个是具有挑战性的——即使在批处理模式下也是如此。最大构图需要次秒的时间才能完全优化。联机计算最坏在10ms/节点范围内；与EKF滤波器或其他计算性能差的方法不同，我们不需要将构图分割成子构图[23]来获得全局最小误差。</p>
<p>与现有方法相比，SPA更快，收敛更好。唯一的例外是在初始化较差的构图中，只有TORO的随机梯度技术才能收敛；但是通过应用生成树初始化，SPA甚至能比TORO更好地解决复杂的合成实例。当与扫描匹配前端结合时，SPA将支持在线勘探和地图构建。因为SPA是一种姿态图方法，所以它允许对地图进行增量添加和删除，便于终身构图[16]。</p>
<p>用于运行SPA的所有相关代码和我们实现的其他方法都可以作为开放源码以及数据集和仿真生成器（www.ros）在线获得。org/./2010/spa)随附的视频显示在一个大型的真实世界数据集上的在线和离线模式下的SPA。</p>
<h2 id="REFERENCES"><a href="#REFERENCES" class="headerlink" title="REFERENCES"></a>REFERENCES</h2><p>[1]  M.  Agrawal  and  K.  Konolige.  FrameSLAM:  From  bundle  adjustmentto  real-time  visual  mapping.IEEE  Transactions  on  Robotics,  24(5) October 2008.</p>
<p>[2]   F. F. Campos and J. S. Rollett. Analysis of preconditioners for conjugategradients  through  distribution  of  eigenvalues.Int.  J.  of  ComputerMathematics, 58(3):135–158, 1995.</p>
<p>[3]   T. A. Davis.Direct Methods for Sparse Linear Systems (Fundamentalsof  Algorithms  2).Society  for  Industrial  and  Applied  Mathematics,Philadelphia, PA, USA, 2006.</p>
<p>[4]   F.  Dellaert.    Square  Root  SAM.    InProc.  of  Robotics:  Science  and Systems (RSS), pages 177–184, Cambridge, MA, USA, 2005.</p>
<p>[5]   J. Dongarra, A. Lumsdaine, R. Pozo, and K. Remington. A sparse matrixlibrary  in  c++  for  high  performance  architecture   s.  InObject OrientedNumerics Conference, pages 214–218, 1994.</p>
<p>[6]   T. Duckett, S. Marsland, and J. Shapiro. Fast, on-line learning of globally consistent maps.Journal of Autonomous Robots, 12(3):287 – 300, 2002.</p>
<p>[7]   R. M. Eustice, H. Singh, and J. J. Leonard. Exactly sparsedelayed-statefilters for view-based SLAM.IEEE Trans. Robotics, 22(6), 2006.</p>
<p>[8]   U.  Frese.    Treemap:  Ano(logn)algorithm  for  indoor  simultaneouslocalization  and  mapping.Journal of Autonomous Robots,  21(2):103–122, 2006.</p>
<p>[9]   U. Frese, P. Larsson, and T. Duckett.  A multilevel relaxation algorithmfor  simultaneous  localisation  and  mapping.IEEE  Transactions  onRobotics, 21(2):1–12, 2005.</p>
<p>[10]  G. Grisetti, C. Stachniss, and W. Burgard. Non-linear constraint networkoptimization for efficient map learning.IEEE Transactions on IntelligentTransportation Systems, 10:428–439, 2009.  ISSN: 1524-9050.</p>
<p>[11]  J.-S. Gutmann, M. Fukuchi, and K. Sabe. Environment identification bycomparing maps of landmarks. InInternational Conference on Roboticsand Automation, 2003.</p>
<p>[12]  J.-S.  Gutmann  and  K.  Konolige.   Incremental  mapping  of  large  cyclicenvironments.  InProc. of the IEEE Int. Symposium on ComputationalIntelligence in Robotics and Automation (CIRA), pages 318–325, Mon-terey, CA, USA, 1999.</p>
<p>[13]  A.  Howard,  M.  Matari ́c,  and  G.  Sukhatme.    Relaxation  on  a  mesh:a  formalism  for  generalized  localization.    InProc.  of  the  IEEE/RSJInt. Conf. on Intelligent Robots and Systems (IROS), pages 1055–1060,2001.</p>
<p>[14]  M.  Kaess,  A.  Ranganathan,  and  F.  Dellaert.   iSAM:  Fast  incrementalsmoothing and mapping with efficient data association.  InInternationalConference on Robotics and Automation, Rome, 2007.</p>
<p>[15]  K. Konolige.  Large-scale map-making.  InProceedings of the NationalConference on AI (AAAI), 2004.</p>
<p>[16]  K.  Konolige  and  J.  Bowman.Towards  lifelong  visual  maps.InInternational  Conference  on  Intelligent  Robots  and  Systems,  pages1156–1163, 2009.</p>
<p>[17]  K.  Konolige  and  K.  Chou.   Markov  localization  using  correlation.   InProc. of the Int. Conf. on Artificial Intelligence (IJCAI), 1999.</p>
<p>[18]  F.  Lu  and  E.  Milios.    Globally  consistent  range  scan  alignment  for environment mapping. Journal of Autonomous Robots, 4:333–349, 1997.</p>
<p>[19]  I. Mahon, S. Williams, O. Pizarro, and M. Johnson-Roberson.  Efficientview-based  SLAM  using  visual  loop  closures.IEEE  Transactions  onRobotics, 24(5):1002–1014, October 2008.</p>
<p>[20]  M. Montemerlo and S. Thrun. Large-scale robotic 3-d mapping of urbanstructures.  InISER, 2004.</p>
<p>[21]  E. Olson, J. Leonard, and S. Teller.  Fast iterative optimization of posegraphs  with  poor  initial  estimates.  InProc. of the IEEE Int. Conf. onRobotics &amp; Automation (ICRA), pages 2262–2269, 2006.</p>
<p>[22]  E.  B.  Olson.    Real-time  correlative  scan  matching.    In International Conference on Robotics and Automation, pages 4387–4393, 2009.</p>
<p>[23]  L.  Paz,  J.  Tard ́os,  and  J.  Neira.   Divide  and  conquer:  EKF  SLAM  inO(n).IEEE Transactions on Robotics, 24(5), October 2008.</p>
<p>[24]  S.  Thrun  and  M.  Montemerlo. The  graph  SLAM  algorithm  with applications  to  large-scale  mapping  of  urban  structures.Int.  J.  Rob.Res., 25(5-6):403–429, 2006.</p>
<p>[25]  B. Triggs, P. F. McLauchlan, R. I. Hartley, and A. W. Fitzibbon. Bundle adjustment  -  a  modern  synthesis.   InVision  Algorithms:  Theory  and Practice, LNCS, pages 298–375. Springer Verlag, 2000.</p>

      
    </div>
    
    
    

    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    ShaoYue Lin
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://lsy563193.github.io/slam-EfficientSPAFor2DMapping/" title="cartographer论文翻译 二维构图的高效稀疏位姿调整">http://lsy563193.github.io/slam-EfficientSPAFor2DMapping/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/cartographer/" rel="tag"># cartographer</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/homework-Refrigerator storage/" rel="next" title="冰箱收纳">
                <i class="fa fa-chevron-left"></i> 冰箱收纳
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/slam-RealTimeCorrelativeScanMatching/" rel="prev" title="cartographer论文翻译:2d-lidar-slam的实时扫描矫正匹配">
                cartographer论文翻译:2d-lidar-slam的实时扫描矫正匹配 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://avatars0.githubusercontent.com/u/4884007?s=400&u=af3c3a113957bd20c7f2b0102773570000f7b48a&v=4"
                alt="ShaoYue Lin" />
            
              <p class="site-author-name" itemprop="name">ShaoYue Lin</p>
              <p class="site-description motion-element" itemprop="description">持续学习</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/lsy563193" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://youtube.com/" target="_blank" title="YouTube">
                      
                        <i class="fa fa-fw fa-youtube"></i>YouTube</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://hexo.io/zh-cn/" title="Hexo" target="_blank">Hexo</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://theme-next.iissnan.com/" title="nexT" target="_blank">nexT</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#摘要"><span class="nav-text">摘要</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-介绍"><span class="nav-text">1. 介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#II-相关工作"><span class="nav-text">II. 相关工作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#III-SYSTEM-FORMULATION"><span class="nav-text">III. SYSTEM FORMULATION</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IV-SPARSE-POSE-ADJUSTMENT"><span class="nav-text">IV. SPARSE POSE ADJUSTMENT</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#A-Error-Formulation"><span class="nav-text">A. Error Formulation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#B-Linear-System"><span class="nav-text">B. Linear System</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C-Error-Jacobians"><span class="nav-text">C. Error Jacobians</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#D-Sparsity-稀疏性"><span class="nav-text">D.  Sparsity 稀疏性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#E-Compressed-Column-Storage-压缩列存储"><span class="nav-text">E.  Compressed Column Storage 压缩列存储</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#V-SCAN-MATCHING-扫描匹配"><span class="nav-text">V.  SCAN MATCHING 扫描匹配</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#VI-EXPERIMENT-实验"><span class="nav-text">VI.  EXPERIMENT 实验</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#A-精度测量"><span class="nav-text">A.精度测量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#B-真实世界实验：离线优化。"><span class="nav-text">B.真实世界实验：离线优化。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C-真实世界实验：在线优化"><span class="nav-text">C.真实世界实验：在线优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#D-合成数据集"><span class="nav-text">D.合成数据集</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#VII-结论"><span class="nav-text">VII. 结论</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#REFERENCES"><span class="nav-text">REFERENCES</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ShaoYue Lin</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
